(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-read"],{"1c54":function(e,t,n){var i=n("c86c");t=i(!1),t.push([e.i,".general[data-v-58312af2]{position:relative}.general-img[data-v-58312af2]{width:%?120?%;height:%?120?%}.general-dot[data-v-58312af2]{top:0;right:0;width:%?36?%;height:%?36?%;position:absolute;line-height:%?36?%}",""]),e.exports=t},"30f7":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n("7a76"),n("c9b5")},3113:function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("3471")),r=i(n("b7c7")),s=i(n("9b1b"));n("bd06"),n("aa9c"),n("8f71"),n("bf0f"),n("dd2b"),n("aa77"),n("c223");var u={"军师":"junshi","将军":"jiangjun","统帅":"tongshuai","农民":"nongmin","厨师":"chushi","销售":"xiaoshou","铁匠":"tiejiang","教师":"jiaoshi","工人":"gongren","保安":"baoan"},c={data:function(){return{books:[],professions:[],general:null}},onLoad:function(){var e=this;uni.$on("selectGeneral",(function(t){e.general=t,e.$closePage()})),uni.$on("selectBook",(function(t){var n=e.books.findIndex((function(e){return e.name==t.name}));if(n>-1)return e.$toast("不能重复添加");e.books.push((0,s.default)((0,s.default)({},t),{},{chapter:0})),e.$closePage()})),this.getProfessions()},onUnload:function(){uni.$off("selectGeneral"),uni.$off("selectBook")},watch:{general:function(){this.books=[]}},methods:{next:function(e){e.chapter<e.chapters.length&&e.chapter++},prev:function(e){e.chapter>0&&(e.chapter--,this.filter())},remove:function(e,t){this.books.splice(t,1),this.filter()},filter:function(){var e=this,t=(0,r.default)(this.books),n={},i=function(){var i,r=t.length,s={wu:e.general.attributes.wu,zhi:e.general.attributes.zhi,nai:e.general.attributes.nai,ti:e.general.attributes.ti},u=(0,a.default)(e.professions);try{var c=function(){var e=i.value;if(n[e.name])e.levels.findIndex((function(t){return t.experience<=n[e.name]&&(t.wu&&(s.wu+=t.wu),t.zhi&&(s.zhi+=t.zhi),t.nai&&(s.nai+=t.nai),t.ti&&(s.ti+=t.ti)),t.experience>n[e.name]}))};for(u.s();!(i=u.n()).done;)c()}catch(x){u.e(x)}finally{u.f()}for(var o=0;o<t.length;o++){var l,f=t[o],g=0,v=(0,a.default)(f.attributes);try{for(v.s();!(l=v.n()).done;){var d=l.value;g+=s[d]}}catch(x){v.e(x)}finally{v.f()}if(g>=f.value){for(var h in e._general.experiences[f.name])n[h]=(n[h]||0)+e._general.experiences[f.name][h];t.splice(o--,1)}}if(r==t.length){var b,p=(0,a.default)(t);try{var _=function(){var t=b.value;e.books.splice(e.books.findIndex((function(e){return e.name==t.name})),1)};for(p.s();!(b=p.n()).done;)_()}catch(x){p.e(x)}finally{p.f()}return"break"}};while(1){var s=i();if("break"===s)break}},getDifference:function(e){var t=this.professions.find((function(t){return t.name==e}));this._general[u[e]]?this._general[u[e]]==t.levels.length?this.$toast("".concat(e,"满级")):this.$toast("".concat(e,"还差").concat(t.levels[this._general[u[e]]].experience-this._general.experiences[e],"经验升级")):this.$toast("".concat(e,"还差").concat(t.levels[0].experience,"经验升级"))},getProfessions:function(){var e=this;this.$ajax({url:"professions.json"}).then((function(t){e.professions=t}))}},computed:{_general:function(){var e={wu:0,zhi:0,nai:0,ti:0,nuqi:0,zhuiji:0,pugong:0,junshi:0,jiangjun:0,tongshuai:0,nongmin:0,chushi:0,xiaoshou:0,tiejiang:0,jiaoshi:0,gongren:0,baoan:0,experiences:{}};this.general&&(e.wu+=this.general.attributes.wu,e.zhi+=this.general.attributes.zhi,e.nai+=this.general.attributes.nai,e.ti+=this.general.attributes.ti);var t,n=(0,a.default)(this.books);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.experiences[i.name]={};for(var r=0;r<i.chapter;r++)for(var s in i.chapters[r])e.experiences[s]=(e.experiences[s]||0)+i.chapters[r][s],e.experiences[i.name][s]=(e.experiences[i.name][s]||0)+i.chapters[r][s]}}catch(f){n.e(f)}finally{n.f()}var c,o=(0,a.default)(this.professions);try{var l=function(){var t=c.value;if(e.experiences[t.name]){var n=t.levels.findIndex((function(n){return n.experience<=e.experiences[t.name]&&(n.wu&&(e.wu+=n.wu),n.zhi&&(e.zhi+=n.zhi),n.nai&&(e.nai+=n.nai),n.ti&&(e.ti+=n.ti),n.nuqi&&(e.nuqi+=n.nuqi),n.zhuiji&&(e.zhuiji+=n.zhuiji),n.pugong&&(e.pugong+=n.pugong)),n.experience>e.experiences[t.name]}));e[u[t.name]]+=n}};for(o.s();!(c=o.n()).done;)l()}catch(f){o.e(f)}finally{o.f()}return e}}};t.default=c},3471:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,i.default)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,s=e},f:function(){try{u||null==n["return"]||n["return"]()}finally{if(c)throw s}}}},n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("7a76"),n("c9b5");var i=function(e){return e&&e.__esModule?e:{default:e}}(n("5d6b"))},4733:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,i.default)(e)};var i=function(e){return e&&e.__esModule?e:{default:e}}(n("8d0b"))},"61b7":function(e,t,n){"use strict";n.r(t);var i=n("889a"),a=n("b83f");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("9605");var s=n("828b"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"58312af2",null,!1,i["a"],void 0);t["default"]=u.exports},"889a":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"app"},[n("NavBar",{staticClass:"bg-yellow",attrs:{title:"将领读书",back:!0}}),n("v-uni-view",{staticClass:"bg-yellow padding-xl flex flex-wrap justify-around"},[n("v-uni-view",{staticClass:"general",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$openPage("generals")}}},[n("v-uni-image",{staticClass:"general-img round bg-white",attrs:{src:e.general?"https://fevernode.github.io/zjws/img/"+e.general.name+".jpg":""}}),e.general?n("v-uni-view",{staticClass:"general-dot round bg-red text-center cuIcon-close",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.general=null}}}):n("v-uni-view",{staticClass:"general-dot round bg-green text-center cuIcon-add"})],1),n("v-uni-view",{staticClass:"w-100 text-center margin-top-xs"},[n("v-uni-text",{staticClass:"cu-tag bg-red"},[e._v("武 "+e._s(e._general.wu))]),n("v-uni-text",{staticClass:"cu-tag bg-blue"},[e._v("智 "+e._s(e._general.zhi))]),n("v-uni-text",{staticClass:"cu-tag bg-black"},[e._v("耐 "+e._s(e._general.nai))]),n("v-uni-text",{staticClass:"cu-tag bg-green"},[e._v("体 "+e._s(e._general.ti))])],1),n("v-uni-view",{staticClass:"w-100 text-center margin-top-xs"},[n("v-uni-text",{staticClass:"cu-tag bg-red"},[e._v("大招 "+e._s(e._general.nuqi))]),n("v-uni-text",{staticClass:"cu-tag bg-blue"},[e._v("追击 "+e._s(e._general.zhuiji))]),n("v-uni-text",{staticClass:"cu-tag bg-green"},[e._v("普攻 "+e._s(e._general.pugong))])],1),n("v-uni-view",{staticClass:"w-100 text-center margin-top-xs"},[n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("军师")}}},[e._v("军师 "+e._s(e._general.junshi))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("将军")}}},[e._v("将军 "+e._s(e._general.jiangjun))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("统帅")}}},[e._v("统帅 "+e._s(e._general.tongshuai))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("农民")}}},[e._v("农民 "+e._s(e._general.nongmin))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("厨师")}}},[e._v("厨师 "+e._s(e._general.chushi))])],1),n("v-uni-view",{staticClass:"w-100 text-center margin-top-xs"},[n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("销售")}}},[e._v("销售 "+e._s(e._general.xiaoshou))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("铁匠")}}},[e._v("铁匠 "+e._s(e._general.tiejiang))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("教师")}}},[e._v("教师 "+e._s(e._general.jiaoshi))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("工人")}}},[e._v("工人 "+e._s(e._general.gongren))]),n("v-uni-text",{staticClass:"cu-tag bg-brown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getDifference("保安")}}},[e._v("保安 "+e._s(e._general.baoan))])],1),n("v-uni-view",{staticClass:"w-100 bg-white text-center margin-top padding-sm",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$openPage("books?wu="+e._general.wu+"&zhi="+e._general.zhi+"&nai="+e._general.nai+"&ti="+e._general.ti)}}},[e._v("添加书籍")])],1),e.general?n("v-uni-view",{staticClass:"bg-white padding padding-top-xs"},[n("v-uni-view",{staticClass:"cu-bar"},[n("v-uni-view",{staticClass:"action sub-title"},[n("v-uni-text",{staticClass:"text-xl text-bold text-green"},[e._v("阅读书籍")]),n("v-uni-text",{staticClass:"bg-green"})],1)],1),n("v-uni-view",{staticClass:"flex text-black text-center"},[n("v-uni-view",{staticClass:"flex-sub"},[e._v("名称")]),n("v-uni-view",{staticClass:"flex-sub"},[e._v("卷数")]),n("v-uni-view",{staticClass:"flex-sub"},[e._v("操作")])],1),e._l(e.books,(function(t,i){return n("v-uni-view",{key:t.name,staticClass:"flex align-center text-center margin-top-xs"},[n("v-uni-view",{staticClass:"flex-sub"},[n("v-uni-text",{class:["cu-tag",{"六艺":"bg-blue","兵书":"bg-green","诸子":"bg-red","方技":"bg-black"}[t.type]]},[e._v(e._s(t.name))])],1),n("v-uni-view",{staticClass:"flex-sub flex align-center justify-center"},[n("v-uni-view",{staticClass:"round bg-yellow text-center cuIcon-back",staticStyle:{width:"40rpx",height:"40rpx","line-height":"40rpx"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.prev(t)}}}),n("v-uni-view",{staticClass:"text-green margin-left-sm"},[e._v(e._s(t.chapter))]),n("v-uni-view",{staticClass:"margin-lr-xs"},[e._v("/")]),n("v-uni-view",{staticClass:"text-red margin-right-sm"},[e._v(e._s(t.chapters.length))]),n("v-uni-view",{staticClass:"round bg-yellow text-center cuIcon-right",staticStyle:{width:"40rpx",height:"40rpx","line-height":"40rpx"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.next(t)}}})],1),n("v-uni-view",{staticClass:"flex-sub"},[n("v-uni-text",{staticClass:"cu-tag bg-green",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.$toast(JSON.stringify(e._general.experiences[t.name]))}}},[e._v("经验")]),n("v-uni-text",{staticClass:"cu-tag bg-red",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.remove(t,i)}}},[e._v("移除")])],1)],1)}))],2):e._e()],1)},a=[]},9605:function(e,t,n){"use strict";var i=n("aaa6"),a=n.n(i);a.a},aaa6:function(e,t,n){var i=n("1c54");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("967d").default;a("3320524d",i,!0,{sourceMap:!1,shadowMode:!1})},b7c7:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)||(0,a.default)(e)||(0,r.default)(e)||(0,s.default)()};var i=u(n("4733")),a=u(n("d14d")),r=u(n("5d6b")),s=u(n("30f7"));function u(e){return e&&e.__esModule?e:{default:e}}},b83f:function(e,t,n){"use strict";n.r(t);var i=n("3113"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},d14d:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("08eb")}}]);